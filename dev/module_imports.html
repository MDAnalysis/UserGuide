


  
    
  




<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css" integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="shortcut icon" href="_static/logo/mda_favicon.ico">
</head>

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Module imports in MDAnalysis &mdash; MDAnalysis User Guide  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/site.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
    <link rel="canonical" href="https://userguide.mdanalysis.org/module_imports.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="_static/js/versions.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within MDAnalysis User Guide  documentation"
          href="_static/opensearch.xml"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tests in MDAnalysis" href="testing.html" />
    <link rel="prev" title="Preparing a release" href="preparing_releases_and_hotfixes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >




  




<a href="index.html">
  
    <img src="_static/user_guide.png" class="logo" alt="Logo"/>
</a>


  
  
  
    <div class="version">
      2.7.0-dev0
    </div>
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div>
<div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
    <!-- <p class="caption" role="heading"></p> -->
    <ul>
        
        <li class="toctree-l1"><a class="reference internal" href="https://mdanalysis.org">MDAnalysis</a></li>
        
        <li class="toctree-l1"><a class="reference internal" href="https://docs.mdanalysis.org/stable">API docs (stable)</a></li>
        
        <li class="toctree-l1"><a class="reference internal" href="https://docs.mdanalysis.org/dev">API docs (development)</a></li>
        
        <li class="toctree-l1"><a class="reference internal" href="https://mdakits.mdanalysis.org/">MDAKits</a></li>
        
    </ul>
    
        <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/quickstart.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/README.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">MDAnalysis Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data structures</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="universe.html">Universe</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomgroup.html">AtomGroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups_of_atoms.html">Groups of atoms</a></li>
<li class="toctree-l1"><a class="reference internal" href="selections.html">Atom selection language</a></li>
<li class="toctree-l1"><a class="reference internal" href="topology_system.html">The topology system</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Trajectories</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="trajectories/trajectories.html">Trajectories</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectories/slicing_trajectories.html">Slicing trajectories</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectories/transformations.html">On-the-fly transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units and constants</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Input/output</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reading_and_writing.html">Reading and writing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats/index.html">Format overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats/guessing.html">Guessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats/auxiliary.html">Auxiliary files</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats/selection_exporters.html">Selection exporters</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats/format_reference.html">Format reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#alignments-and-rms-fitting">Alignments and RMS fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#distances-and-contacts">Distances and contacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#trajectory-similarity">Trajectory similarity</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#structure">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#volumetric-analyses">Volumetric analyses</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#dimension-reduction">Dimension reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#polymers-and-membranes">Polymers and membranes</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/README.html#hydrogen-bond-analysis">Hydrogen Bond Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/custom_trajectory_analysis.html">Writing your own trajectory analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/analysis/custom_parallel_analysis.html">Parallelizing analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="standard_selections.html">Standard residues in MDAnalysis selections</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_topology.html">Advanced topology concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Example data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to MDAnalysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing_code.html">Contributing to the main codebase</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing_docs.html">Contributing to the user guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparing_releases_and_hotfixes.html">Preparing a release</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Module imports in MDAnalysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-rules-for-importing">General rules for importing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-imports-in-mdanalysis-analysis">Module imports in <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-imports-in-the-test-suite">Module imports in the test suite</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-dependencies-in-the-code">Module dependencies in the code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-of-core-module-dependencies">List of core module dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modules-in-the-core">Modules in the “core”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-modules-in-mdanalysis-analysis-and-mdanalysis-visualization">Optional modules in <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.visualization</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Tests in MDAnalysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

</div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MDAnalysis User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Module imports in MDAnalysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/module_imports.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-imports-in-mdanalysis">
<span id="module-imports"></span><h1>Module imports in MDAnalysis<a class="headerlink" href="#module-imports-in-mdanalysis" title="Permalink to this heading"></a></h1>
<p>We are striving to keep module dependencies small and lightweight (i.e., easily installable with <code class="docutils literal notranslate"><span class="pre">pip</span></code>).</p>
<section id="general-rules-for-importing">
<span id="id1"></span><h2>General rules for importing<a class="headerlink" href="#general-rules-for-importing" title="Permalink to this heading"></a></h2>
<blockquote>
<div><ul>
<li><p>Imports should all happen at the start of a module (not inside classes or functions).</p></li>
<li><p>Modules must be imported in the following order:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/2/library/__future__.html">future</a> (<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">absolute_import,</span> <span class="pre">print_function,</span> <span class="pre">division</span></code>)</p></li>
<li><p>Compatibility imports (e.g. <code class="docutils literal notranslate"><span class="pre">six</span></code>)</p></li>
<li><p>global imports (installed packages)</p></li>
<li><p>local imports (MDAnalysis modules)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>use <strong>absolute imports</strong> in the library (i.e. relative imports must be explicitly indicated)</p></li>
</ul>
</div></blockquote>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">six.moves</span> <span class="kn">import</span> <span class="nb">range</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">.core</span>
<span class="kn">import</span> <span class="nn">..units</span>
</pre></div>
</div>
<section id="module-imports-in-mdanalysis-analysis">
<h3>Module imports in <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code><a class="headerlink" href="#module-imports-in-mdanalysis-analysis" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>In <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code>, all imports must be at the top level (as in the General Rule) — see <a class="reference external" href="https://github.com/MDAnalysis/mdanalysis/issues/666">Issue 666</a> for more information.</p></li>
<li><p><a class="reference internal" href="#optional-modules"><span class="std std-ref">Optional modules</span></a> can be imported</p></li>
<li><p>No analysis module is imported automatically at the <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code> level to avoid breaking the installation when optional dependencies are missing.</p></li>
</ol>
</section>
<section id="module-imports-in-the-test-suite">
<span id="module-imports-in-tests"></span><h3>Module imports in the test suite<a class="headerlink" href="#module-imports-in-the-test-suite" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Use the module import order in <a class="reference internal" href="#general-rules-for-importing"><span class="std std-ref">General rules for importing</span></a>, but import <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis</span></code> modules before <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysisTests</span></code> imports</p></li>
<li><p>Do not use <em>relative imports</em> (e.g. <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">.datafiles</span></code>) in the test suite. This breaks running the tests from inside the test directory (see <a class="reference external" href="https://github.com/MDAnalysis/mdanalysis/issues/189">Issue 189</a> for more information)</p></li>
<li><p>Never import the <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis</span></code> module from the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> of <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysisTests</span></code> or from any of its plugins (it’s ok to import from test files). Importing <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis</span></code> from the test setup code will cause severe coverage underestimation.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="module-dependencies-in-the-code">
<h2>Module dependencies in the code<a class="headerlink" href="#module-dependencies-in-the-code" title="Permalink to this heading"></a></h2>
<section id="list-of-core-module-dependencies">
<span id="core-module-dependencies"></span><h3>List of core module dependencies<a class="headerlink" href="#list-of-core-module-dependencies" title="Permalink to this heading"></a></h3>
<p>Any module from the standard library can be used, as well as the following nonstandard libraries:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">six</span></code></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.26)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code></a></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">biopython</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridDataFormats</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">mmtf-python</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">matplotlib</span></code></p></li>
</ul>
</div></blockquote>
<p>because these packages are always installed.</p>
<p>If you must depend on a new external package, first discuss its use on <a class="reference external" href="https://github.com/MDAnalysis/mdanalysis/discussions/categories/developement">GitHub Discussions (Development)</a> or as part of the issue/pull request.</p>
</section>
<section id="modules-in-the-core">
<span id="core-modules"></span><h3>Modules in the “core”<a class="headerlink" href="#modules-in-the-core" title="Permalink to this heading"></a></h3>
<p>The core of MDAnalysis contains all packages that are not in <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.visualization</span></code>. Only packages in the <a class="reference internal" href="#core-module-dependencies"><span class="std std-ref">List of core module dependencies</span></a> can be imported.</p>
</section>
<section id="optional-modules-in-mdanalysis-analysis-and-mdanalysis-visualization">
<span id="optional-modules"></span><h3>Optional modules in <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.visualization</span></code><a class="headerlink" href="#optional-modules-in-mdanalysis-analysis-and-mdanalysis-visualization" title="Permalink to this heading"></a></h3>
<p>Modules under <code class="xref py py-mod docutils literal notranslate"><span class="pre">MDAnalysis.analysis</span></code> are considered independent from the core package. Each analysis module can have its own set of dependencies. We strive to keep them small, but module authors are, in principle, free to import what they need. When analysis modules import packages outside of <a class="reference internal" href="#core-module-dependencies"><span class="std std-ref">List of core module dependencies</span></a>, the dependencies are considered <strong>optional</strong> (and should be listed in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> under <em>analysis</em>). (See also <a class="reference external" href="https://github.com/MDAnalysis/mdanalysis/issues/1159">Issue 1159</a> for more discussion.)</p>
<p>A user who does not have a specific optional package installed must still be able to import everything else in MDAnalysis. An analysis module <em>may</em> simply raise an <code class="code docutils literal notranslate"><span class="pre">ImportError</span></code> if a package is missing. However, it is recommended that the module should print and log an <em>error message</em> notifying the user that a specific additional package needs to be installed to use it.</p>
<p>If a large portion of the code in the module does not depend on a specific optional module then you should:</p>
<blockquote>
<div><ul class="simple">
<li><p>guard the import at the top level with a <code class="code docutils literal notranslate"><span class="pre">try/except</span></code></p></li>
<li><p>print and log a <em>warning</em></p></li>
<li><p>only raise an <code class="code docutils literal notranslate"><span class="pre">ImportError</span></code> in the specific function or method that would depend on the missing module.</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="preparing_releases_and_hotfixes.html" class="btn btn-neutral float-left" title="Preparing a release" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="testing.html" class="btn btn-neutral float-right" title="Tests in MDAnalysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2024, Lily Wang, Irfan Alibay, Patricio Barletta, Cédric Bouysset, Jan Domanski, Bjarne Feddersen, Florent Langenfeld, Hugo MacDermott-Opeskin, Micaela Matta, Rocco Meli, Paul Smith, Mieczyslaw Torchala, Mark Verma, Yuxuan Zhuang, Richard J. Gowers, and Oliver Beckstein..</p>
  </div>

  

<div class="footer"><p>Please see
    our <a href="https://www.mdanalysis.org/pages/privacy/">Privacy Policy</a>
    to learn how <a href="https://www.mdanalysis.org">MDAnalysis</a> collects data.</p>
    <script data-goatcounter="https://mdanalysis.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
    var versions_json_url = 'https://userguide.mdanalysis.org/versions.json'
</script>

<div class="rst-versions" data-toggle="rst-versions" role="note"
     aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"></span>
        
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
        <dl id="versionselector">
            <dt>Other Versions</dt>
        </dl>

    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>